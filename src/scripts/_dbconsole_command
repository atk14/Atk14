#!/usr/bin/env php
<?php

require_once(dirname(__FILE__)."/load.php");

if( isset($argv[1]) && $argv[1] == '--gui' ) {
	$gui = true;
	array_splice($argv, 1, 1);
	$argc-= 1;
} else {
	$gui = false;
}

$configuration_name = isset($argv[1]) ? $argv[1] : "default";

$d = $ATK14_GLOBAL->getDatabaseConfig($configuration_name);

if(!$d){
	exit(1);
}

switch($d["adapter"]){
	case "postgresql":
		if( $gui ) {
			$cmd = "pgadmin3 -qc 'host=$d[host] port=$d[port] dbname=$d[database] user=$d[username]'";
		} else {
			$cmd = "psql -U $d[username] $d[database] -h $d[host] -p $d[port]";
		}
		break;
	case "mysql":
		$cmd = "mysql --user=$d[username] --host=$d[host] --port=$d[port] --host=$d[host] --password=$d[password] $d[database]";
		break;
	default:
		exit(1);
}

echo $cmd;
echo "\n";
